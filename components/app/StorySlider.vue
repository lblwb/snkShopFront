<template>
  <div class="user-stories" v-if="showSlider">
    <div class="overlay" v-show="overlayVisible" @click="closeStorySlider"></div>
    <div class="container">
      <div class="header">
        <div class="headerWrapper"
             style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px">
          <div class="headerStoriesAccount">
            <svg width="91" height="16" viewBox="0 0 91 16" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M5.99998 5.33333H4.22064C4.02839 5.33331 3.83842 5.37486 3.66373 5.45513C3.48905 5.53541 3.33379 5.65251 3.2086 5.7984C3.08341 5.9443 2.99125 6.11554 2.93844 6.30039C2.88563 6.48524 2.87342 6.67932 2.90264 6.86933L3.73931 12.304C3.81192 12.7762 4.05116 13.2068 4.41372 13.5179C4.77629 13.8289 5.23824 14 5.71597 14H10.284C10.7618 14.0001 11.2239 13.8292 11.5866 13.5181C11.9493 13.207 12.1887 12.7763 12.2613 12.304L13.098 6.86933C13.1272 6.67932 13.115 6.48524 13.0622 6.30039C13.0094 6.11554 12.9172 5.9443 12.792 5.7984C12.6668 5.65251 12.5116 5.53541 12.3369 5.45513C12.1622 5.37486 11.9722 5.33331 11.78 5.33333H9.99998H5.99998Z"
                fill="#DCDCDC"/>
              <path
                d="M5.99998 7.33333V5.33333M9.99998 7.33333V5.33333M5.99998 5.33333H4.22064C4.02839 5.33331 3.83842 5.37486 3.66373 5.45513C3.48905 5.53541 3.33379 5.65251 3.2086 5.7984C3.08341 5.9443 2.99125 6.11554 2.93844 6.30039C2.88563 6.48524 2.87342 6.67932 2.90264 6.86933L3.73931 12.304C3.81192 12.7762 4.05116 13.2068 4.41372 13.5179C4.77629 13.8289 5.23824 14 5.71597 14H10.284C10.7618 14.0001 11.2239 13.8292 11.5866 13.5181C11.9493 13.207 12.1887 12.7763 12.2613 12.304L13.098 6.86933C13.1272 6.67932 13.115 6.48524 13.0622 6.30039C13.0094 6.11554 12.9172 5.9443 12.792 5.7984C12.6668 5.65251 12.5116 5.53541 12.3369 5.45513C12.1622 5.37486 11.9722 5.33331 11.78 5.33333H9.99998M5.99998 5.33333H9.99998M5.99998 5.33333V4C5.99998 3.46957 6.21069 2.96086 6.58577 2.58579C6.96084 2.21071 7.46955 2 7.99998 2C8.53041 2 9.03912 2.21071 9.41419 2.58579C9.78927 2.96086 9.99998 3.46957 9.99998 4V5.33333"
                stroke="#DCDCDC" stroke-linecap="round" stroke-linejoin="round"/>
              <path
                d="M23.3555 9.80273C23.3555 9.62695 23.3281 9.4707 23.2734 9.33398C23.2227 9.19727 23.1309 9.07227 22.998 8.95898C22.8652 8.8457 22.6777 8.73633 22.4355 8.63086C22.1973 8.52148 21.8926 8.41016 21.5215 8.29688C21.1152 8.17188 20.7402 8.0332 20.3965 7.88086C20.0566 7.72461 19.7598 7.54492 19.5059 7.3418C19.252 7.13477 19.0547 6.89844 18.9141 6.63281C18.7734 6.36328 18.7031 6.05273 18.7031 5.70117C18.7031 5.35352 18.7754 5.03711 18.9199 4.75195C19.0684 4.4668 19.2773 4.2207 19.5469 4.01367C19.8203 3.80273 20.1426 3.64062 20.5137 3.52734C20.8848 3.41016 21.2949 3.35156 21.7441 3.35156C22.377 3.35156 22.9219 3.46875 23.3789 3.70312C23.8398 3.9375 24.1934 4.25195 24.4395 4.64648C24.6895 5.04102 24.8145 5.47656 24.8145 5.95312H23.3555C23.3555 5.67188 23.2949 5.42383 23.1738 5.20898C23.0566 4.99023 22.877 4.81836 22.6348 4.69336C22.3965 4.56836 22.0938 4.50586 21.7266 4.50586C21.3789 4.50586 21.0898 4.55859 20.8594 4.66406C20.6289 4.76953 20.457 4.91211 20.3438 5.0918C20.2305 5.27148 20.1738 5.47461 20.1738 5.70117C20.1738 5.86133 20.2109 6.00781 20.2852 6.14062C20.3594 6.26953 20.4727 6.39062 20.625 6.50391C20.7773 6.61328 20.9688 6.7168 21.1992 6.81445C21.4297 6.91211 21.7012 7.00586 22.0137 7.0957C22.4863 7.23633 22.8984 7.39258 23.25 7.56445C23.6016 7.73242 23.8945 7.92383 24.1289 8.13867C24.3633 8.35352 24.5391 8.59766 24.6562 8.87109C24.7734 9.14062 24.832 9.44727 24.832 9.79102C24.832 10.1504 24.7598 10.4746 24.6152 10.7637C24.4707 11.0488 24.2637 11.293 23.9941 11.4961C23.7285 11.6953 23.4082 11.8496 23.0332 11.959C22.6621 12.0645 22.248 12.1172 21.791 12.1172C21.3809 12.1172 20.9766 12.0625 20.5781 11.9531C20.1836 11.8438 19.8242 11.6777 19.5 11.4551C19.1758 11.2285 18.918 10.9473 18.7266 10.6113C18.5352 10.2715 18.4395 9.875 18.4395 9.42188H19.9102C19.9102 9.69922 19.957 9.93555 20.0508 10.1309C20.1484 10.3262 20.2832 10.4863 20.4551 10.6113C20.627 10.7324 20.8262 10.8223 21.0527 10.8809C21.2832 10.9395 21.5293 10.9688 21.791 10.9688C22.1348 10.9688 22.4219 10.9199 22.6523 10.8223C22.8867 10.7246 23.0625 10.5879 23.1797 10.4121C23.2969 10.2363 23.3555 10.0332 23.3555 9.80273ZM29.8066 10.5059V5.66016H31.2246V12H29.8887L29.8066 10.5059ZM30.0059 9.1875L30.4805 9.17578C30.4805 9.60156 30.4336 9.99414 30.3398 10.3535C30.2461 10.709 30.1016 11.0195 29.9062 11.2852C29.7109 11.5469 29.4609 11.752 29.1562 11.9004C28.8516 12.0449 28.4863 12.1172 28.0605 12.1172C27.752 12.1172 27.4688 12.0723 27.2109 11.9824C26.9531 11.8926 26.7305 11.7539 26.543 11.5664C26.3594 11.3789 26.2168 11.1348 26.1152 10.834C26.0137 10.5332 25.9629 10.1738 25.9629 9.75586V5.66016H27.375V9.76758C27.375 9.99805 27.4023 10.1914 27.457 10.3477C27.5117 10.5 27.5859 10.623 27.6797 10.7168C27.7734 10.8105 27.8828 10.877 28.0078 10.916C28.1328 10.9551 28.2656 10.9746 28.4062 10.9746C28.8086 10.9746 29.125 10.8965 29.3555 10.7402C29.5898 10.5801 29.7559 10.3652 29.8535 10.0957C29.9551 9.82617 30.0059 9.52344 30.0059 9.1875ZM34.0723 7.01367V12H32.6602V5.66016H33.9902L34.0723 7.01367ZM33.8203 8.5957L33.3633 8.58984C33.3672 8.14062 33.4297 7.72852 33.5508 7.35352C33.6758 6.97852 33.8477 6.65625 34.0664 6.38672C34.2891 6.11719 34.5547 5.91016 34.8633 5.76562C35.1719 5.61719 35.5156 5.54297 35.8945 5.54297C36.1992 5.54297 36.4746 5.58594 36.7207 5.67188C36.9707 5.75391 37.1836 5.88867 37.3594 6.07617C37.5391 6.26367 37.6758 6.50781 37.7695 6.80859C37.8633 7.10547 37.9102 7.4707 37.9102 7.9043V12H36.4922V7.89844C36.4922 7.59375 36.4473 7.35352 36.3574 7.17773C36.2715 6.99805 36.1445 6.87109 35.9766 6.79688C35.8125 6.71875 35.6074 6.67969 35.3613 6.67969C35.1191 6.67969 34.9023 6.73047 34.7109 6.83203C34.5195 6.93359 34.3574 7.07227 34.2246 7.24805C34.0957 7.42383 33.9961 7.62695 33.9258 7.85742C33.8555 8.08789 33.8203 8.33398 33.8203 8.5957ZM49.2832 7.5V7.96875C49.2832 8.61328 49.1992 9.19141 49.0312 9.70312C48.8633 10.2148 48.623 10.6504 48.3105 11.0098C48.002 11.3691 47.6309 11.6445 47.1973 11.8359C46.7637 12.0234 46.2832 12.1172 45.7559 12.1172C45.2324 12.1172 44.7539 12.0234 44.3203 11.8359C43.8906 11.6445 43.5176 11.3691 43.2012 11.0098C42.8848 10.6504 42.6387 10.2148 42.4629 9.70312C42.291 9.19141 42.2051 8.61328 42.2051 7.96875V7.5C42.2051 6.85547 42.291 6.2793 42.4629 5.77148C42.6348 5.25977 42.877 4.82422 43.1895 4.46484C43.5059 4.10156 43.8789 3.82617 44.3086 3.63867C44.7422 3.44727 45.2207 3.35156 45.7441 3.35156C46.2715 3.35156 46.752 3.44727 47.1855 3.63867C47.6191 3.82617 47.9922 4.10156 48.3047 4.46484C48.6172 4.82422 48.8574 5.25977 49.0254 5.77148C49.1973 6.2793 49.2832 6.85547 49.2832 7.5ZM47.8125 7.96875V7.48828C47.8125 7.01172 47.7656 6.5918 47.6719 6.22852C47.582 5.86133 47.4473 5.55469 47.2676 5.30859C47.0918 5.05859 46.875 4.87109 46.6172 4.74609C46.3594 4.61719 46.0684 4.55273 45.7441 4.55273C45.4199 4.55273 45.1309 4.61719 44.877 4.74609C44.623 4.87109 44.4062 5.05859 44.2266 5.30859C44.0508 5.55469 43.916 5.86133 43.8223 6.22852C43.7285 6.5918 43.6816 7.01172 43.6816 7.48828V7.96875C43.6816 8.44531 43.7285 8.86719 43.8223 9.23438C43.916 9.60156 44.0527 9.91211 44.2324 10.166C44.416 10.416 44.6348 10.6055 44.8887 10.7344C45.1426 10.8594 45.4316 10.9219 45.7559 10.9219C46.084 10.9219 46.375 10.8594 46.6289 10.7344C46.8828 10.6055 47.0977 10.416 47.2734 10.166C47.4492 9.91211 47.582 9.60156 47.6719 9.23438C47.7656 8.86719 47.8125 8.44531 47.8125 7.96875ZM52.0137 7.01367V12H50.6016V5.66016H51.9316L52.0137 7.01367ZM51.7617 8.5957L51.3047 8.58984C51.3086 8.14062 51.3711 7.72852 51.4922 7.35352C51.6172 6.97852 51.7891 6.65625 52.0078 6.38672C52.2305 6.11719 52.4961 5.91016 52.8047 5.76562C53.1133 5.61719 53.457 5.54297 53.8359 5.54297C54.1406 5.54297 54.416 5.58594 54.6621 5.67188C54.9121 5.75391 55.125 5.88867 55.3008 6.07617C55.4805 6.26367 55.6172 6.50781 55.7109 6.80859C55.8047 7.10547 55.8516 7.4707 55.8516 7.9043V12H54.4336V7.89844C54.4336 7.59375 54.3887 7.35352 54.2988 7.17773C54.2129 6.99805 54.0859 6.87109 53.918 6.79688C53.7539 6.71875 53.5488 6.67969 53.3027 6.67969C53.0605 6.67969 52.8438 6.73047 52.6523 6.83203C52.4609 6.93359 52.2988 7.07227 52.166 7.24805C52.0371 7.42383 51.9375 7.62695 51.8672 7.85742C51.7969 8.08789 51.7617 8.33398 51.7617 8.5957ZM62.9004 12H61.0781L61.0898 10.834H62.9004C63.4277 10.834 63.8691 10.7188 64.2246 10.4883C64.584 10.2578 64.8535 9.92773 65.0332 9.49805C65.2168 9.06836 65.3086 8.55664 65.3086 7.96289V7.5C65.3086 7.03906 65.2559 6.63086 65.1504 6.27539C65.0488 5.91992 64.8965 5.62109 64.6934 5.37891C64.4941 5.13672 64.248 4.95312 63.9551 4.82812C63.666 4.70312 63.332 4.64062 62.9531 4.64062H61.043V3.46875H62.9531C63.5195 3.46875 64.0371 3.56445 64.5059 3.75586C64.9746 3.94336 65.3789 4.21484 65.7188 4.57031C66.0625 4.92578 66.3262 5.35156 66.5098 5.84766C66.6934 6.34375 66.7852 6.89844 66.7852 7.51172V7.96289C66.7852 8.57617 66.6934 9.13086 66.5098 9.62695C66.3262 10.123 66.0625 10.5488 65.7188 10.9043C65.375 11.2559 64.9648 11.5273 64.4883 11.7188C64.0156 11.9062 63.4863 12 62.9004 12ZM61.8926 3.46875V12H60.4219V3.46875H61.8926ZM69.5391 6.86719V12H68.127V5.66016H69.4746L69.5391 6.86719ZM71.4785 5.61914L71.4668 6.93164C71.3809 6.91602 71.2871 6.9043 71.1855 6.89648C71.0879 6.88867 70.9902 6.88477 70.8926 6.88477C70.6504 6.88477 70.4375 6.91992 70.2539 6.99023C70.0703 7.05664 69.916 7.1543 69.791 7.2832C69.6699 7.4082 69.5762 7.56055 69.5098 7.74023C69.4434 7.91992 69.4043 8.12109 69.3926 8.34375L69.0703 8.36719C69.0703 7.96875 69.1094 7.59961 69.1875 7.25977C69.2656 6.91992 69.3828 6.62109 69.5391 6.36328C69.6992 6.10547 69.8984 5.9043 70.1367 5.75977C70.3789 5.61523 70.6582 5.54297 70.9746 5.54297C71.0605 5.54297 71.1523 5.55078 71.25 5.56641C71.3516 5.58203 71.4277 5.59961 71.4785 5.61914ZM75.041 12.1172C74.5723 12.1172 74.1484 12.041 73.7695 11.8887C73.3945 11.7324 73.0742 11.5156 72.8086 11.2383C72.5469 10.9609 72.3457 10.6348 72.2051 10.2598C72.0645 9.88477 71.9941 9.48047 71.9941 9.04688V8.8125C71.9941 8.31641 72.0664 7.86719 72.2109 7.46484C72.3555 7.0625 72.5566 6.71875 72.8145 6.43359C73.0723 6.14453 73.377 5.92383 73.7285 5.77148C74.0801 5.61914 74.4609 5.54297 74.8711 5.54297C75.3242 5.54297 75.7207 5.61914 76.0605 5.77148C76.4004 5.92383 76.6816 6.13867 76.9043 6.41602C77.1309 6.68945 77.2988 7.01562 77.4082 7.39453C77.5215 7.77344 77.5781 8.19141 77.5781 8.64844V9.25195H72.6797V8.23828H76.1836V8.12695C76.1758 7.87305 76.125 7.63477 76.0312 7.41211C75.9414 7.18945 75.8027 7.00977 75.6152 6.87305C75.4277 6.73633 75.1777 6.66797 74.8652 6.66797C74.6309 6.66797 74.4219 6.71875 74.2383 6.82031C74.0586 6.91797 73.9082 7.06055 73.7871 7.24805C73.666 7.43555 73.5723 7.66211 73.5059 7.92773C73.4434 8.18945 73.4121 8.48438 73.4121 8.8125V9.04688C73.4121 9.32422 73.4492 9.58203 73.5234 9.82031C73.6016 10.0547 73.7148 10.2598 73.8633 10.4355C74.0117 10.6113 74.1914 10.75 74.4023 10.8516C74.6133 10.9492 74.8535 10.998 75.123 10.998C75.4629 10.998 75.7656 10.9297 76.0312 10.793C76.2969 10.6562 76.5273 10.4629 76.7227 10.2129L77.4668 10.9336C77.3301 11.1328 77.1523 11.3242 76.9336 11.5078C76.7148 11.6875 76.4473 11.834 76.1309 11.9473C75.8184 12.0605 75.4551 12.1172 75.041 12.1172ZM82.2363 10.2832C82.2363 10.1426 82.2012 10.0156 82.1309 9.90234C82.0605 9.78516 81.9258 9.67969 81.7266 9.58594C81.5312 9.49219 81.2422 9.40625 80.8594 9.32812C80.5234 9.25391 80.2148 9.16602 79.9336 9.06445C79.6562 8.95898 79.418 8.83203 79.2188 8.68359C79.0195 8.53516 78.8652 8.35938 78.7559 8.15625C78.6465 7.95312 78.5918 7.71875 78.5918 7.45312C78.5918 7.19531 78.6484 6.95117 78.7617 6.7207C78.875 6.49023 79.0371 6.28711 79.248 6.11133C79.459 5.93555 79.7148 5.79688 80.0156 5.69531C80.3203 5.59375 80.6602 5.54297 81.0352 5.54297C81.5664 5.54297 82.0215 5.63281 82.4004 5.8125C82.7832 5.98828 83.0762 6.22852 83.2793 6.5332C83.4824 6.83398 83.584 7.17383 83.584 7.55273H82.1719C82.1719 7.38477 82.1289 7.22852 82.043 7.08398C81.9609 6.93555 81.8359 6.81641 81.668 6.72656C81.5 6.63281 81.2891 6.58594 81.0352 6.58594C80.793 6.58594 80.5918 6.625 80.4316 6.70312C80.2754 6.77734 80.1582 6.875 80.0801 6.99609C80.0059 7.11719 79.9688 7.25 79.9688 7.39453C79.9688 7.5 79.9883 7.5957 80.0273 7.68164C80.0703 7.76367 80.1406 7.83984 80.2383 7.91016C80.3359 7.97656 80.4688 8.03906 80.6367 8.09766C80.8086 8.15625 81.0234 8.21289 81.2812 8.26758C81.7656 8.36914 82.1816 8.5 82.5293 8.66016C82.8809 8.81641 83.1504 9.01953 83.3379 9.26953C83.5254 9.51562 83.6191 9.82812 83.6191 10.207C83.6191 10.4883 83.5586 10.7461 83.4375 10.9805C83.3203 11.2109 83.1484 11.4121 82.9219 11.584C82.6953 11.752 82.4238 11.8828 82.1074 11.9766C81.7949 12.0703 81.4434 12.1172 81.0527 12.1172C80.4785 12.1172 79.9922 12.0156 79.5938 11.8125C79.1953 11.6055 78.8926 11.3418 78.6855 11.0215C78.4824 10.6973 78.3809 10.3613 78.3809 10.0137H79.7461C79.7617 10.2754 79.834 10.4844 79.9629 10.6406C80.0957 10.793 80.2598 10.9043 80.4551 10.9746C80.6543 11.041 80.8594 11.0742 81.0703 11.0742C81.3242 11.0742 81.5371 11.041 81.709 10.9746C81.8809 10.9043 82.0117 10.8105 82.1016 10.6934C82.1914 10.5723 82.2363 10.4355 82.2363 10.2832ZM88.4121 10.2832C88.4121 10.1426 88.377 10.0156 88.3066 9.90234C88.2363 9.78516 88.1016 9.67969 87.9023 9.58594C87.707 9.49219 87.418 9.40625 87.0352 9.32812C86.6992 9.25391 86.3906 9.16602 86.1094 9.06445C85.832 8.95898 85.5938 8.83203 85.3945 8.68359C85.1953 8.53516 85.041 8.35938 84.9316 8.15625C84.8223 7.95312 84.7676 7.71875 84.7676 7.45312C84.7676 7.19531 84.8242 6.95117 84.9375 6.7207C85.0508 6.49023 85.2129 6.28711 85.4238 6.11133C85.6348 5.93555 85.8906 5.79688 86.1914 5.69531C86.4961 5.59375 86.8359 5.54297 87.2109 5.54297C87.7422 5.54297 88.1973 5.63281 88.5762 5.8125C88.959 5.98828 89.252 6.22852 89.4551 6.5332C89.6582 6.83398 89.7598 7.17383 89.7598 7.55273H88.3477C88.3477 7.38477 88.3047 7.22852 88.2188 7.08398C88.1367 6.93555 88.0117 6.81641 87.8438 6.72656C87.6758 6.63281 87.4648 6.58594 87.2109 6.58594C86.9688 6.58594 86.7676 6.625 86.6074 6.70312C86.4512 6.77734 86.334 6.875 86.2559 6.99609C86.1816 7.11719 86.1445 7.25 86.1445 7.39453C86.1445 7.5 86.1641 7.5957 86.2031 7.68164C86.2461 7.76367 86.3164 7.83984 86.4141 7.91016C86.5117 7.97656 86.6445 8.03906 86.8125 8.09766C86.9844 8.15625 87.1992 8.21289 87.457 8.26758C87.9414 8.36914 88.3574 8.5 88.7051 8.66016C89.0566 8.81641 89.3262 9.01953 89.5137 9.26953C89.7012 9.51562 89.7949 9.82812 89.7949 10.207C89.7949 10.4883 89.7344 10.7461 89.6133 10.9805C89.4961 11.2109 89.3242 11.4121 89.0977 11.584C88.8711 11.752 88.5996 11.8828 88.2832 11.9766C87.9707 12.0703 87.6191 12.1172 87.2285 12.1172C86.6543 12.1172 86.168 12.0156 85.7695 11.8125C85.3711 11.6055 85.0684 11.3418 84.8613 11.0215C84.6582 10.6973 84.5566 10.3613 84.5566 10.0137H85.9219C85.9375 10.2754 86.0098 10.4844 86.1387 10.6406C86.2715 10.793 86.4355 10.9043 86.6309 10.9746C86.8301 11.041 87.0352 11.0742 87.2461 11.0742C87.5 11.0742 87.7129 11.041 87.8848 10.9746C88.0566 10.9043 88.1875 10.8105 88.2773 10.6934C88.3672 10.5723 88.4121 10.4355 88.4121 10.2832Z"
                fill="#DCDCDC"/>
            </svg>
          </div>
          <div class="headerStoriesExit" @click="closeStorySlider">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M12 2L12.324 2.001L12.642 2.005L13.258 2.022L13.557 2.035L14.136 2.069L14.689 2.115C19.474 2.579 21.421 4.526 21.885 9.311L21.931 9.864L21.965 10.443C21.97 10.541 21.975 10.641 21.978 10.742L21.995 11.358L22 12L21.995 12.642L21.978 13.258L21.965 13.557L21.931 14.136L21.885 14.689C21.421 19.474 19.474 21.421 14.689 21.885L14.136 21.931L13.557 21.965C13.459 21.97 13.359 21.975 13.258 21.978L12.642 21.995L12 22L11.358 21.995L10.742 21.978L10.443 21.965L9.864 21.931L9.311 21.885C4.526 21.421 2.579 19.474 2.115 14.689L2.069 14.136L2.035 13.557C2.03014 13.4574 2.0258 13.3577 2.022 13.258L2.005 12.642C2.002 12.432 2 12.218 2 12L2.001 11.676L2.005 11.358L2.022 10.742L2.035 10.443L2.069 9.864L2.115 9.311C2.579 4.526 4.526 2.579 9.311 2.115L9.864 2.069L10.443 2.035C10.541 2.03 10.641 2.025 10.742 2.022L11.358 2.005C11.568 2.002 11.782 2 12 2ZM10.511 9.14C10.3015 9.01528 10.0536 8.9714 9.81401 9.01663C9.57441 9.06186 9.35959 9.19307 9.20995 9.38558C9.06031 9.5781 8.98617 9.81865 9.00146 10.062C9.01675 10.3054 9.12043 10.5347 9.293 10.707L10.585 12L9.293 13.293L9.21 13.387C9.05459 13.588 8.98151 13.8406 9.0056 14.0935C9.02969 14.3464 9.14916 14.5807 9.33972 14.7488C9.53029 14.9168 9.77767 15.006 10.0316 14.9982C10.2856 14.9905 10.527 14.8863 10.707 14.707L12 13.415L13.293 14.707L13.387 14.79C13.588 14.9454 13.8406 15.0185 14.0935 14.9944C14.3464 14.9703 14.5807 14.8508 14.7488 14.6603C14.9168 14.4697 15.006 14.2223 14.9982 13.9684C14.9905 13.7144 14.8863 13.473 14.707 13.293L13.415 12L14.707 10.707L14.79 10.613C14.9454 10.412 15.0185 10.1594 14.9944 9.90647C14.9703 9.65355 14.8508 9.41928 14.6603 9.25125C14.4697 9.08321 14.2223 8.99402 13.9684 9.00177C13.7144 9.00953 13.473 9.11365 13.293 9.293L12 10.585L10.707 9.293L10.613 9.21L10.511 9.14Z"
                fill="white"/>
            </svg>
          </div>
        </div>
        <div class="storiesBlock" style="">
          <div class="storiesBlockWrapper" style="position: relative;">
            <button class="pause-button" @click="togglePause" style="display: flex; align-items: center; background: #FF6B35; border:solid 1px #FF6B35">
              <!--              {{ paused ? 'Возобновить' : 'Пауза' }}-->

              <span style="display: flex; align-items: center" v-if="paused">
<svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path
  d="M12 6.99998V12L14 14M13.017 20.943C11.1349 21.1569 9.23322 20.7715 7.58288 19.8417C5.93254 18.9119 4.61765 17.4851 3.82546 15.7644C3.03327 14.0438 2.80417 12.1171 3.1708 10.2586C3.53742 8.40021 4.48108 6.70484 5.86737 5.41396C7.25366 4.12309 9.01191 3.30252 10.8917 3.06913C12.7715 2.83574 14.6771 3.20142 16.3369 4.1141C17.9968 5.02678 19.3264 6.43991 20.1364 8.15226C20.9463 9.86461 21.1954 11.7889 20.848 13.651M17 22L22 19L17 16V22Z"
  stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>


              </span>
              <span style="display: flex; align-items: center; font-size: 12px; color: #fff; font-weight: 600" v-else>
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-right: 4px">
<path
  d="M6 6C6 5.73478 6.10536 5.48043 6.29289 5.29289C6.48043 5.10536 6.73478 5 7 5H9C9.26522 5 9.51957 5.10536 9.70711 5.29289C9.89464 5.48043 10 5.73478 10 6V18C10 18.2652 9.89464 18.5196 9.70711 18.7071C9.51957 18.8946 9.26522 19 9 19H7C6.73478 19 6.48043 18.8946 6.29289 18.7071C6.10536 18.5196 6 18.2652 6 18V6Z"
  stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
<path
  d="M14 6C14 5.73478 14.1054 5.48043 14.2929 5.29289C14.4804 5.10536 14.7348 5 15 5H17C17.2652 5 17.5196 5.10536 17.7071 5.29289C17.8946 5.48043 18 5.73478 18 6V18C18 18.2652 17.8946 18.5196 17.7071 18.7071C17.5196 18.8946 17.2652 19 17 19H15C14.7348 19 14.4804 18.8946 14.2929 18.7071C14.1054 18.5196 14 18.2652 14 18V6Z"
  stroke="#fff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
              <template v-if="autoSwitchInterval && tickerTimer !== 0 && !paused">
                {{ tickerTimer / 1000 }}
              </template>
              </span>

            </button>
            <div class="story-segments">
              <div v-for="(story, index) in stories" :key="index" class="story-segments-item"
                   @click="selectStory(index)"
                   :class="{'active': selectedStoryIndex === index}">
                <!-- Ваш код для отображения сегмента, например, иконка или индикатор активности -->
                <!--          {{ index }}-->
              </div>
            </div>

            <div class="story-content" @click="switchToNextStory">
              <transition name="fade" mode="out-in">
                <!-- Отображение выбранной истории -->
                <template v-if="selectedStoryIndex !== null">
                  <div class="content" v-if="stories[selectedStoryIndex].type === 'image'">
                    {{ selectedStoryIndex }}
                    <img :src="stories[selectedStoryIndex].src" alt="Изображение истории"/>
                  </div>
                  <div class="content" v-else-if="stories[selectedStoryIndex].type === 'video'">
                    <video :src="stories[selectedStoryIndex].src" controls autoplay loop muted>
                      Ваш браузер не поддерживает тег video.
                    </video>
                  </div>
                </template>
              </transition>
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script>
export default {
  props: {
    showSlider: {
      type: Boolean,
      default: true
    },
    username: {
      type: String,
      required: true,
    },
    stories: {
      type: Array,
      required: true,
    },
  },
  data() {
    return {
      selectedStoryIndex: null,
      autoSwitchInterval: null,
      paused: false,
      overlayVisible: true,
      timer: 12000,
      tickerTimer: 12000,
    };
  },
  methods: {
    selectStory(index) {
      this.selectedStoryIndex = index;
      this.restartAutoSwitch();
    },
    togglePause() {
      this.paused = !this.paused;
      if (!this.paused) {
        this.restartAutoSwitch();
      } else {
        this.clearAutoSwitchInterval();
      }
    },
    restartAutoSwitch() {
      this.tickerTimer = 0;
      clearInterval(this.autoSwitchTickerInterval);
      this.clearAutoSwitchInterval();
      if (!this.paused) {
        this.autoSwitchInterval = setInterval(() => {
          this.switchToNextStory();
          this.restartAutoSwitch();
        }, this.timer);
        this.autoSwitchTickerInterval = setInterval(() => {
          this.updateCountdown();
        }, 960);
      }
    },
    updateCountdown() {
      if (this.tickerTimer > 0) {
        this.tickerTimer -= 1000;
      } else {
        this.tickerTimer = this.timer; // Reset the countdown timer
      }
    },
    switchToNextStory() {
      const nextIndex = (this.selectedStoryIndex + 1) % this.stories.length;
      this.selectedStoryIndex = nextIndex;
      //

      // Если достигнут конец и начинается новый цикл, закрываем слайдер
      if (nextIndex === 0) {
        this.closeStorySlider();
      }

      this.restartAutoSwitch();
      //
    },
    clearAutoSwitchInterval() {
      clearInterval(this.autoSwitchInterval);
    },
    closeStorySlider() {
      //
      this.restartAutoSwitch();
      this.clearAutoSwitchInterval();
      this.$nextTick();
      //
      this.selectedStoryIndex = null;
      this.autoSwitchInterval = null;
      this.paused = false;
      this.overlayVisible = true;
      this.stories = [];
      this.username = "";
      document.body.style.overflow = 'unset';
      this.$emit('closeBtn');
    }
  },
  created() {
    this.selectStory(0);
    document.body.style.overflow = 'hidden';
  },
  beforeDestroy() {
    this.clearAutoSwitchInterval();
    document.body.style.overflow = 'unset';
  },
  computed: {
    // countdownTimer() {
    //   const secondsRemaining = Math.ceil(this.tickerTimer / 1000);
    //   const seconds = secondsRemaining % 60;
    //   return `- ${seconds < 10 ? '0' : ''}${seconds}`;
    // },
  },
};
</script>


<style scoped>
.fade-enter-active, .fade-leave-active {
  transition: opacity 0.5s;
}

.fade-enter, .fade-leave-to /* .fade-leave-active in <2.1.8 */
{
  opacity: 0;
}
</style>

<style scoped>
.user-stories {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

.overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.8);
  z-index: 999;
}

.container {
  position: relative;
  z-index: 1000;
  height: 100%;
  display: flex;
  /* align-items: center; */
  justify-content: center;
  width: 100%;
  top: 20px;
}

.header {
}

.storiesBlock {
  border-radius: 10px;
  overflow: hidden;
  background: #000;
  min-width: 90vw;
  max-width: 90vw;
  min-height: 76vh;
  max-height: 76vh;
  border: #444;
}

@media screen and (max-height: 600px) {
  .storiesBlock {
    min-height: 70vh;
    max-height: 70vh;
  }

}


.story-segments {
  display: flex;
  padding: 12px 16px;
  width: 100%;
  gap: 4px;
  box-sizing: border-box;
}

.story-segments-item {
  cursor: pointer;
  padding: 2px 2px;
  display: flex;
  flex: 1;
  background: #fff;
  border-radius: 10px;
}

.story-segments-item.active {
  background-color: #FF6B35;
}

.story-content {
  padding: 0px 16px;
  width: 100%;
  height: auto;
  box-sizing: border-box;
  display: flex;
  align-items: center;
  justify-content: center;
}

.story-content .content {
  box-sizing: border-box;
}

.story-content img {
  width: 100%;
  height: auto;
  -o-object-fit: cover;
  object-fit: contain;
  max-height: 60vh;
  border-radius: 16px;
}

.pause-button {
  position: absolute;
  top: 60px;
  right: 20px;
  padding: 10px;
  cursor: pointer;
  background-color: #000;
  color: #fff;
  border: none;
  border-radius: 4px;
  font-size: 14px;
}

.pause-button:hover {
  background-color: #333;
}
</style>
